{% extends "./layout--fat.html" %}
{% block content %}

{% if (data['search-results']|length == 0) %}
<div class="govuk-grid-row">
     <div class="govuk-grid-column-full">
          <a href="javascript:history.back()" class="govuk-back-link">Back</a>
          <h1 class="govuk-heading-xl govuk-!-margin-bottom-1">
               Search results
          </h1>
          <p>
               Sorry, there is currently no apprenticeship training for '<b>{{data['apprenticeship-picker']}}</b>'.
          </p>
     </div>
</div>

<div class="govuk-grid-row">
     <div class="govuk-grid-column-two-thirds">
          <form class="search-box" method="post">
               <div class="govuk-form-group">
                    <label class="govuk-label govuk-!-font-weight-bold govuk-!-width-three-quarters" for="name">Try a new search</label>
                    <span id="more-detail-hint" class="govuk-hint">Can include job title or apprenticeship</span>
                    <input class="govuk-input govuk-!-width-two-thirds govuk-!-margin-bottom-0" id="name" name="search-query" type="text" value="{{data['apprenticeship-picker']}}">
                    {{ govukButton({
                         text: "Search"
                    }) }}
               </div>
          </form>
     </div>
</div>

<div class="govuk-grid-row">
     <div class="govuk-grid-column-one-half">
          <div class="editSearch">
               <h2 class="govuk-heading-m">
                    Similar results
               </h2>

               <div id="similarSearch">
                    <ol class="govuk-list govuk-list--number">
                         <li><a href="#">Delivery address</a></li>
                         <li><a href="#">Payment</a></li>
                         <li><a href="#">Confirmation</a></li>
                    </ol>
               </div>
          </div>
     </div>

     <div id="apprenticeship-results" class="govuk-grid-column-one-half">
          <div class="govuk-grid-row">
               <div class="govuk-grid-column-one-half">
                    <h2 class="govuk-heading-m">
                         Did you mean
                    </h2>

                    <div id="didYouMeanSearch">
                         <ol class="govuk-list govuk-list--number">
                              <li><a href="#">Delivery address</a></li>
                              <li><a href="#">Payment</a></li>
                              <li><a href="#">Confirmation</a></li>
                         </ol>
                    </div>
               </div>
          </div>
     </div>
</div>
{% else %}

{% for result in data['search-results'] %}
<div class="govuk-grid-row">
     <div class="govuk-grid-column-full">
          <a href="javascript:history.back()" class="govuk-back-link">Back</a>
          <p>&nbsp;</p>
          <h1 class="govuk-heading-xl govuk-!-margin-bottom-1">
               Search results
          </h1>
          <p>
               There are <b>{{data['search-results'].length}}</b> apprenticeships matching your search for '<b>{{data['apprenticeship-picker']}}</b>'
          </p>
     </div>
</div>

<div class="govuk-grid-row">
     <div class="govuk-grid-column-two-thirds">
          <form class="search-box" method="post">
               <div class="govuk-form-group">
                    <label class="govuk-label govuk-!-font-weight-bold govuk-!-width-three-quarters" for="name">Showing search results for:</label>
                    <input class="govuk-input govuk-!-width-two-thirds govuk-!-margin-bottom-0" id="name" name="search-query" type="text" value="{{data['apprenticeship-picker']}}">
                    {{ govukButton({
                         text: "Search"
                    }) }}
               </div>
          </form>
     </div>
</div>

<div class="govuk-grid-row">
     <div class="govuk-grid-column-one-third">
          <div class="editSearch">
               <h2 class="govuk-heading-m">Filter results</h2>

               <div id="EditSearch">
                    <div class="filters-block filter-box">
                         <form method="get" autocomplete="off">
                              <fieldset class="filters filters-accordion unfolded">
                                   <h2 class="toggler govuk-heading-s">Apprenticeship level</h2>
                                   <div class="toggled-content">
                                        <ul class="govuk-!-margin-top-0 govuk-list">
                                             <li>
                                                  <input value="2" id="SelectedLevels_2" name="SelectedLevels" type="checkbox" />
                                                  <label for="SelectedLevels_2" class="govuk-body-m">level 2</label>
                                             </li>
                                             <li>
                                                  <input value="3" id="SelectedLevels_3" name="SelectedLevels" type="checkbox" />
                                                  <label for="SelectedLevels_3" class="govuk-body-m">level 3</label>
                                             </li>
                                             <li>
                                                  <input value="4" id="SelectedLevels_4" name="SelectedLevels" type="checkbox" disabled />
                                                  <label for="SelectedLevels_4" class="govuk-body-m disabled">level 4</label>
                                             </li>
                                             <li>
                                                  <input value="5" id="SelectedLevels_5" name="SelectedLevels" type="checkbox" disabled />
                                                  <label for="SelectedLevels_5" class="govuk-body-m disabled">level 5</label>
                                             </li>
                                             <li>
                                                  <input value="6" id="SelectedLevels_6" name="SelectedLevels" type="checkbox" disabled />
                                                  <label for="SelectedLevels_6" class="govuk-body-m disabled">level 6</label>
                                             </li>
                                             <li>
                                                  <input value="7" id="SelectedLevels_7" name="SelectedLevels" type="checkbox" disabled />
                                                  <label for="SelectedLevels_7" class="govuk-body-m disabled">level 7</label>
                                             </li>
                                        </ul>

                                        {{ govukDetails({
                                             summaryText: "Explain levels",
                                             html: '<p>Apprenticeships are set at different levels of difficulty from the equivalent of GCSE (level 2) up to postgraduate (level 7)</p>
                                             <p><a href="https://www.gov.uk/what-different-qualification-levels-mean/overview" target="_blank" rel="external">More about levels</a></p>',
                                             classes: "govuk-!-margin-bottom-0"
                                        }) }}
                                   </div>
                              </fieldset>

                              <fieldset class="filters filters-accordion unfolded">
                                   <h2 class="toggler govuk-heading-s">Related search terms</h2>
                                   <div class="toggled-content">
                                        <ul class="govuk-!-margin-top-0 govuk-list">
                                             <li>
                                                  <input value="2" id="SelectedLevels_2" name="SelectedLevels" type="checkbox" />
                                                  <label for="SelectedLevels_2" class="govuk-body-m">level 2</label>
                                             </li>
                                             <li>
                                                  <input value="3" id="SelectedLevels_3" name="SelectedLevels" type="checkbox" />
                                                  <label for="SelectedLevels_3" class="govuk-body-m">level 3</label>
                                             </li>
                                             <li>
                                                  <input value="4" id="SelectedLevels_4" name="SelectedLevels" type="checkbox" disabled />
                                                  <label for="SelectedLevels_4" class="govuk-body-m disabled">level 4</label>
                                             </li>
                                             <li>
                                                  <input value="5" id="SelectedLevels_5" name="SelectedLevels" type="checkbox" disabled />
                                                  <label for="SelectedLevels_5" class="govuk-body-m disabled">level 5</label>
                                             </li>
                                             <li>
                                                  <input value="6" id="SelectedLevels_6" name="SelectedLevels" type="checkbox" disabled />
                                                  <label for="SelectedLevels_6" class="govuk-body-m disabled">level 6</label>
                                             </li>
                                             <li>
                                                  <input value="7" id="SelectedLevels_7" name="SelectedLevels" type="checkbox" disabled />
                                                  <label for="SelectedLevels_7" class="govuk-body-m disabled">level 7</label>
                                             </li>
                                        </ul>

                                        {{ govukDetails({
                                             summaryText: "Explain levels",
                                             html: '<p>Apprenticeships are set at different levels of difficulty from the equivalent of GCSE (level 2) up to postgraduate (level 7)</p>
                                             <p><a href="https://www.gov.uk/what-different-qualification-levels-mean/overview" target="_blank" rel="external">More about levels</a></p>',
                                             classes: "govuk-!-margin-bottom-0"
                                        }) }}
                                   </div>
                              </fieldset>

                              <input type="submit" class="govuk-button" value="Update results" />
                         </form>
                    </div>
               </div>
          </div>
     </div>

     <div class="govuk-grid-column-two-thirds">

          <article class="app-search-result framework-result" id="framework-560-3-2">
               <h2 class="result-title govuk-!-margin-bottom-2">
                    {% if result.StandardId %}
                         {% set courseType = 'standard' %}
                    {% else %}
                         {% set courseType = 'framework' %}
                    {% endif %}
                    <a href="course?courseId={{result.StandardId or result.FrameworkId}}&courseType={{courseType}}">{{ result.Title }}</a>
               </h2>
               <ul class="govuk-list">
                    <li><b>Level:</b> {{ result.Level }} (equivalent to GCSEs at grades A* to C)</li>
                    <li><b>Typical length:</b> {{ result.Duration }} months</li>
               </ul>
          </article>
     </div>
</div>
{% endfor %}

{% endif %}

{% endblock %}

{% block pageScripts %}
<script src="/public/javascripts/jquery-1.11.3.js"></script>
<script src="/public/javascripts/toggler.js"></script>
{% endblock %}
